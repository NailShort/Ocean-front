import{aA as w,r as A,c as B,b1 as y,aN as r,k as _,l as V,m as t,d as o,Q as u,F as z,aO as q,aa as D,a8 as p,a_ as K,aK as c,ab as N,ac as P,aW as m,y as T,be as j,b0 as E,t as L,u as O}from"./index.7857a1ea.js";import{Q as b}from"./QSelect.d8d12153.js";import{Q as W}from"./QFile.111ed352.js";import{Q as G}from"./QForm.2549fd3f.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";import"./selection.4a3f2feb.js";import"./QItemLabel.e782caa8.js";import"./rtl.b51694b1.js";import"./format.2a3572e1.js";const Q=g=>(L("data-v-0e958503"),g=g(),O(),g),J={id:"Admin"},M={class:"content justify-center",align:"center"},R={class:"top col-12 row"},X=Q(()=>t("div",{class:"col-8"},[t("h4",{class:"title"},"\u9B5A\u7A2E\u5716\u9451\u7BA1\u7406")],-1)),Y={class:"new col-4 q-pa-md q-gutter-sm"},Z={class:"categroys q-pa-md q-gutter-sm col-12",align:"center"},ee=Q(()=>t("thead",null,[t("tr",{align:"center"},[t("th",null,"\u5716\u7247"),t("th",null,"\u540D\u7A31"),t("th",null,"\u6210\u9AD4\u5C3A\u5BF8"),t("th",null,"\u7522\u5730"),t("th",null,"\u7A2E\u985E"),t("th",null,"\u7BA1\u7406")])],-1)),le={class:"img"},ae=["src"],se={class:"name"},te={class:"size"},oe={class:"place"},ne={class:"categroy"},de={class:"btn"},ie={class:"text-h6 col-12",align:"center"},re={__name:"FishPage",setup(g){const k=["\u5C0F\u4E11\u9B5A","\u96C0\u9BDB","\u5012\u540A","\u5C0F\u578B\u795E\u4ED9","\u5927\u578B\u795E\u4ED9","\u8776\u9B5A","\u7832\u5F48","\u7BB1\u9B68","\u9B68\u9B5A","\u9752\u86D9","\u9686\u982D\u9B5A","\u8349\u8393\u9B5A","\u6D77\u91D1\u9B5A","\u8766\u864E"],C=["\u6EAB\u548C","\u5177\u653B\u64CA\u6027","\u5371\u96AA","\u540C\u79D1\u76F8\u6B98","\u653B\u64CA\u73CA\u745A"],F=["\u96DC\u98DF","\u8089\u98DF","\u7D20\u98DF"],U=["\u5370\u5EA6\u6D0B","\u897F\u592A\u5E73\u6D0B","\u7D05\u6D77","\u5370\u5EA6\u5C3C\u897F\u4E9E","\u5927\u5821\u7901","\u8056\u8A95\u5CF6","\u6FB3\u5927\u5229\u4E9E","\u73CA\u745A\u6D77","\u6590\u6FDF"],i={required(a){return!!a||"\u6B04\u4F4D\u5FC5\u586B"},price(a){return a>=0||"\u5C3A\u5BF8\u932F\u8AA4"}},n=w([]),e=w({_id:"",name:"",egname:"",stname:"",danger:"",food:"",size:0,description:"",image:void 0,sell:!1,place:"",category:"",loading:!1,dialog:!1,idx:-1}),h=a=>{a===-1?(e._id="",e.name="",e.egname="",e.stname="",e.danger="",e.food="",e.size=0,e.description="",e.image=void 0,e.sell=!1,e.place="",e.category="",e.loading=!1,e.idx=-1):(e._id=n[a]._id,e.name=n[a].name,e.egname=n[a].egname,e.stname=n[a].stname,e.danger=n[a].danger,e.food=n[a].food,e.size=n[a].size,e.description=n[a].description,e.image=void 0,e.sell=n[a].sell,e.place=n[a].place,e.category=n[a].category,e.loading=!1,e.idx=a),e.dialog=!0},S=async()=>{var s,l;e.loading=!0;const a=new FormData;a.append("name",e.name),a.append("egname",e.egname),a.append("stname",e.stname),a.append("danger",e.danger),a.append("food",e.food),a.append("size",e.size),a.append("description",e.description),a.append("image",e.image),a.append("sell",e.sell),a.append("place",e.place),a.append("category",e.category);try{if(e._id.length===0){const{data:d}=await y.post("/fishs",a);n.push(d.result),r.fire({icon:"success",title:"\u6210\u529F",text:"\u65B0\u589E\u6210\u529F"})}else{const{data:d}=await y.patch("/fishs/"+e._id,a);n[e.idx]=d.result,r.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"})}e.dialog=!1}catch(d){r.fire({icon:"error",title:"\u5931\u6557",text:((l=(s=d==null?void 0:d.response)==null?void 0:s.data)==null?void 0:l.message)||"\u767C\u751F\u932F\u8AA4"})}e.loading=!1},I=async a=>{var s,l;try{await y.delete(`/fishs/${a}`);const d=n.findIndex(f=>f._id===a);n.splice(d,1),r.fire({icon:"success",title:"\u6210\u529F",text:"\u522A\u9664\u6210\u529F"})}catch(d){r.fire({icon:"error",title:"\u5931\u6557",text:((l=(s=d==null?void 0:d.response)==null?void 0:s.data)==null?void 0:l.message)||"\u767C\u751F\u932F\u8AA4"})}},x=["\u6240\u6709\u9B5A\u7A2E","\u5C0F\u4E11\u9B5A","\u96C0\u9BDB","\u5012\u540A\u9B5A","\u5C0F\u578B\u795E\u4ED9","\u5927\u578B\u795E\u4ED9","\u8776\u9B5A","\u7832\u5F48","\u7BB1\u9B68","\u9B68\u9B5A","\u9752\u86D9","\u9686\u982D\u9B5A","\u8349\u8393\u9B5A","\u6D77\u91D1\u9B5A","\u8766\u864E"],v=A(x[0]),$=B(()=>n.filter(a=>v.value===x[0]?a:a.category===v.value));return(async()=>{var a,s;try{const{data:l}=await y.get("/fishs/all");n.push(...l.result)}catch(l){r.fire({icon:"error",title:"\u5931\u6557",text:((s=(a=l==null?void 0:l.response)==null?void 0:a.data)==null?void 0:s.message)||"\u767C\u751F\u932F\u8AA4"})}})(),(a,s)=>(_(),V("div",J,[t("div",M,[t("div",R,[X,t("div",Y,[o(u,{label:"\u65B0\u589E\u9B5A\u7A2E",color:"primary",onClick:s[0]||(s[0]=l=>h(-1))})])]),t("div",Z,[(_(),V(z,null,q(x,(l,d)=>o(u,{outline:"",rounded:"",color:"primary",key:d,label:l,onClick:f=>v.value=l},null,8,["label","onClick"])),64))]),t("table",null,[ee,t("tbody",null,[(_(!0),V(z,null,q(D($),(l,d)=>(_(),V("tr",{align:"center",key:l._id},[t("td",le,[t("img",{src:l.image,width:100},null,8,ae)]),t("td",se,c(l.name),1),t("td",te,c(l.size)+" cm",1),t("td",oe,c(l.place),1),t("td",ne,c(l.category),1),t("td",de,[o(u,{size:"sm",round:"",color:"primary",icon:"edit",onClick:f=>h(d)},null,8,["onClick"]),o(u,{size:"sm",round:"",color:"red",icon:"delete",onClick:f=>I(l._id)},null,8,["onClick"])])]))),128))])]),o(K,{modelValue:e.dialog,"onUpdate:modelValue":s[13]||(s[13]=l=>e.dialog=l),persistent:""},{default:p(()=>[o(N,{style:{width:"100%"}},{default:p(()=>[o(G,{onSubmit:S},{default:p(()=>[o(P,{class:"flex row justify-between",style:{padding:"16px 50px 16px 50px"}},{default:p(()=>[t("div",ie,c(e._id.length>0?"\u7DE8\u8F2F\u9B5A\u7A2E":"\u65B0\u589E\u9B5A\u7A2E"),1),o(m,{class:"col-6",style:{padding:"10px"},filled:"",modelValue:e.name,"onUpdate:modelValue":s[1]||(s[1]=l=>e.name=l),label:"\u540D\u7A31","lazy-rules":"",rules:[i.required]},null,8,["modelValue","rules"]),o(b,{class:"col-6",style:{padding:"10px"},filled:"",modelValue:e.category,"onUpdate:modelValue":s[2]||(s[2]=l=>e.category=l),options:k,label:"\u5206\u985E",rules:[i.required]},null,8,["modelValue","rules"]),o(m,{class:"col-6",style:{padding:"10px"},filled:"",modelValue:e.egname,"onUpdate:modelValue":s[3]||(s[3]=l=>e.egname=l),label:"\u82F1\u6587\u540D\u7A31","lazy-rules":"",rules:[i.required]},null,8,["modelValue","rules"]),o(m,{class:"col-6",style:{padding:"10px"},filled:"",modelValue:e.stname,"onUpdate:modelValue":s[4]||(s[4]=l=>e.stname=l),label:"\u5B78\u8853\u540D\u7A31","lazy-rules":"",rules:[i.required]},null,8,["modelValue","rules"]),o(b,{class:"col-6",style:{padding:"10px"},filled:"",modelValue:e.danger,"onUpdate:modelValue":s[5]||(s[5]=l=>e.danger=l),options:C,label:"\u5371\u96AA\u6027",rules:[i.required]},null,8,["modelValue","rules"]),o(b,{class:"col-6",style:{padding:"10px"},filled:"",modelValue:e.food,"onUpdate:modelValue":s[6]||(s[6]=l=>e.food=l),options:F,label:"\u98DF\u6027",rules:[i.required]},null,8,["modelValue","rules"]),o(m,{class:"col-6",style:{padding:"10px"},filled:"",type:"number",modelValue:e.size,"onUpdate:modelValue":s[7]||(s[7]=l=>e.size=l),label:"\u6210\u9AD4\u5C3A\u5BF8","lazy-rules":"",rules:[i.required,i.price]},null,8,["modelValue","rules"]),o(b,{class:"col-6",style:{padding:"10px"},filled:"",modelValue:e.place,"onUpdate:modelValue":s[8]||(s[8]=l=>e.place=l),options:U,label:"\u7522\u5730",rules:[i.required]},null,8,["modelValue","rules"]),o(W,{class:"col-6",style:{padding:"10px"},outlined:"",modelValue:e.image,"onUpdate:modelValue":s[9]||(s[9]=l=>e.image=l)},{prepend:p(()=>[o(T,{name:"attach_file"})]),_:1},8,["modelValue"]),o(m,{class:"col-12",style:{padding:"10px"},modelValue:e.description,"onUpdate:modelValue":s[10]||(s[10]=l=>e.description=l),filled:"",clearable:"",type:"textarea",color:"red-12",label:"\u5167\u6587",hint:"\u8F38\u5165\u5167\u6587","shadow-text":a.textareaShadowText,onKeydown:a.processTextareaFill,onFocus:a.processTextareaFill,rules:[i.required]},null,8,["modelValue","shadow-text","onKeydown","onFocus","rules"]),o(j,{style:{padding:"10px"},class:"col-12",modelValue:e.sell,"onUpdate:modelValue":s[11]||(s[11]=l=>e.sell=l),label:"\u4E0A\u67B6"},null,8,["modelValue"])]),_:1}),o(E,{align:"center",class:"text-primary",style:{padding:"16px"}},{default:p(()=>[o(u,{disabled:e.loading,type:"submit",color:"primary",label:"\u9001\u51FA"},null,8,["disabled"]),o(u,{disabled:e.loading,onClick:s[12]||(s[12]=l=>e.dialog=!1),label:"\u53D6\u6D88",color:"primary",flat:"",class:"q-ml-sm"},null,8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]))}};var be=H(re,[["__scopeId","data-v-0e958503"]]);export{be as default};
